
å„ä½ä¹…ç­‰äº†ï¼ç¶“éå¹¾é€±çš„è¡åˆºï¼Œçµ‚æ–¼è¿ä¾†ç©©å®šçš„ **Master CSS v2.0** å…¬æ¸¬ç‰ˆï¼Œæå‰è©¦ç”¨çš„ç›®çš„æ˜¯å¸Œæœ›é›†çµå„ä½å°æ–¼æ–°åŠŸèƒ½çš„åæ‡‰ã€å›é¥‹ç”šè‡³å»ºè­°ä¾†åŠ å¼·ç‰ˆæœ¬çš„é€šç”¨åŠç©©å®šï¼Œä¸¦ä¸”åœ¨å…¬æ¸¬æœŸé–“åšæœ€å¾Œçš„ä¿®è¨‚ã€‚

å®‰è£ Master CSS å…¬æ¸¬ç‰ˆï¼š
```bash
npm install @master/css@beta
```

è®“æˆ‘å€‘é€šéå…¬æ¸¬èªªæ˜ä¾†å·çªºä¸€äº›æ–°åŠŸèƒ½å§ï¼



##### ç›®éŒ„

- [å…¨æ–°çš„é ç·¨è­¯æ¨¡å¼](#å…¨æ–°çš„é ç·¨è­¯æ¨¡å¼)
  - [âœ¨ Webpack](#-webpack)
  - [âœ¨ Vite](#-vite)
  - [âœ¨ Next.js](#-nextjs)
- [å…¨æ–°çš„èªæ³•](#å…¨æ–°çš„èªæ³•)
  - [âœ¨ ç¾¤çµ„é¸å–å™¨ Grouping Selectors](#-ç¾¤çµ„é¸å–å™¨-grouping-selectors)
  - [âœ¨ `color` çš„æ›¿ä»£åç¨± `fg|foreground`](#-color-çš„æ›¿ä»£åç¨±-fgforeground)
  - [âœ¨ æ”¯æ´é€éç™¾åˆ†æ¯” `%` è¨­ç½®è‰²å½©é€æ˜åº¦](#-æ”¯æ´é€éç™¾åˆ†æ¯”--è¨­ç½®è‰²å½©é€æ˜åº¦)
  - [âœ¨ `-webkit-text-fill-color` çš„é€Ÿè¨˜ `(t|text):color`](#--webkit-text-fill-color-çš„é€Ÿè¨˜-ttextcolor)
- [å…¨æ–°çš„é…ç½®åŠç®¡ç†](#å…¨æ–°çš„é…ç½®åŠç®¡ç†)
  - [âš™ï¸ æ“´å±•åŠåˆä½µé…ç½®](#ï¸-æ“´å±•åŠåˆä½µé…ç½®)
  - [âš™ï¸ æ‰‹å‹•åˆå§‹ Master CSS](#ï¸-æ‰‹å‹•åˆå§‹-master-css)
  - [âš™ï¸ è‡ªå‹•åˆå§‹ Master CSS](#ï¸-è‡ªå‹•åˆå§‹-master-css)
  - [âœ¨ `config.themes` é€éè‡ªè¨‚ä¸»é¡Œå¤§å¹…ç°¡åŒ–æ¨™è¨˜](#-configthemes-é€éè‡ªè¨‚ä¸»é¡Œå¤§å¹…ç°¡åŒ–æ¨™è¨˜)
  - [âœ¨ `config.selectors` è‡ªè¨‚é¸å–å™¨æ¨™è¨˜](#-configselectors-è‡ªè¨‚é¸å–å™¨æ¨™è¨˜)
- [å…§å»ºä¸»é¡Œåˆ‡æ›èˆ‡åŒæ­¥](#å…§å»ºä¸»é¡Œåˆ‡æ›èˆ‡åŒæ­¥)
  - [âœ¨ åˆ‡æ›ä¸»é¡Œæ–¹æ¡ˆ](#-åˆ‡æ›ä¸»é¡Œæ–¹æ¡ˆ)
  - [âœ¨ å­˜å–ä¸»é¡Œæ–¹æ¡ˆ](#-å­˜å–ä¸»é¡Œæ–¹æ¡ˆ)
  - [âœ¨ è‡ªå®šä¸»é¡Œæ–¹æ¡ˆé…ç½®](#-è‡ªå®šä¸»é¡Œæ–¹æ¡ˆé…ç½®)
  - [âœ¨ åœ¨ React ä¸­å¯¦ä½œä¸»é¡Œåˆ‡æ›èˆ‡ä»‹é¢](#-åœ¨-react-ä¸­å¯¦ä½œä¸»é¡Œåˆ‡æ›èˆ‡ä»‹é¢)
- [å…¨æ–°å¥—ä»¶ã€å‡ç´šèˆ‡æ›´å‹•](#å…¨æ–°å¥—ä»¶å‡ç´šèˆ‡æ›´å‹•)
  - [âœ¨ CSS React](#-css-react)
  - [âœ¨ CSS Compiler](#-css-compiler)
  - [â¬†ï¸ å‡ç´š Normal CSS](#ï¸-å‡ç´š-normal-css)
  - [â¬†ï¸ å‡ç´š CSS èªè¨€æœå‹™](#ï¸-å‡ç´š-css-èªè¨€æœå‹™)
  - [ğŸ”„ `fade` -\> `slate`](#-fade---slate)
  - [ğŸ”„ `MasterStyleSheet` -\> `MasterCSS`](#-masterstylesheet---mastercss)
  - [ğŸ”„ `MasterStyle` -\> `MasterCSSRule`](#-masterstyle---mastercssrule)
  - [ğŸ”„ `id="master-css"` -\> `title="master"`](#-idmaster-css---titlemaster)
  - [ğŸ”„ `config.colorSchemes` -\> `config.themes`](#-configcolorschemes---configthemes)
- [æ›´å¤šçš„ API](#æ›´å¤šçš„-api)
  - [`render()`](#render)
  - [`renderFromHTML()`](#renderfromhtml)
  - [`renderIntoHTML()`](#renderintohtml)
  - [`fillColorScale()`](#fillcolorscale)
  - [`defaultConfig`](#defaultconfig)
- [å†ä¾†æ˜¯ä»€éº¼ï¼Ÿ](#å†ä¾†æ˜¯ä»€éº¼)

---

# å…¨æ–°çš„é ç·¨è­¯æ¨¡å¼

https://user-images.githubusercontent.com/33840671/197425066-65be13ed-920d-4367-9b6e-1d2a90134313.mp4

åœ¨ä»‹ç´¹é ç·¨è­¯ ( Ahead-of-time Compilation ) æ¨¡å¼å‰ï¼Œè®“æˆ‘å€‘å…ˆå›é¡§ v1.0 çš„å„ªå‹¢ã€‚

Master CSS åœ¨ v1.0 å°ˆæ³¨æ‰“é€ ä¸€å€‹æ–¼åŸ·è¡ŒæœŸé«˜æ•ˆé‹è¡Œçš„ JIT å¼•æ“ï¼Œé¡åç”Ÿæˆé€±æœŸåªéœ€ `~0.01ms/class`ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹é»ï¼š
- **âš¡ï¸ æ²’æœ‰ä½¿ç”¨ CSS è½‰æ›å·¥å…·** â€”â€” __Tailwind CSS__ åœ¨å»ºç½®æœŸä½¿ç”¨äº† `postcss`, `autoprefixer` é è½‰æ› CSS
- **âš¡ï¸ æ²’æœ‰ä½¿ç”¨ CSS é è™•ç†å™¨** â€”â€” __Styled Components__ åœ¨åŸ·è¡ŒæœŸä½¿ç”¨äº† `css-to-react-native`, `stylis` é è™•ç† CSS
- **âš¡ï¸ æ²’æœ‰å°‡é¡åé€²è¡Œ Hash åŠ å·¥** â€”â€” __Styled Components__ åœ¨åŸ·è¡ŒæœŸå°‡é¡é€²è¡Œ hash ä¾†ç¾¤çµ„ç‰¹å®šåŸŸçš„ CSS è¦å‰‡
- **âš¡ï¸ ç¨ç«‹çš„è¦å‰‡å¼•æ“å®¹å™¨** â€”â€” å¤§éƒ¨åˆ†çš„ CSS-in-JS å·¥å…·å¦‚ __Styled Components__ éƒ½ä¾é™„è‘—æ¡†æ¶çš„æ¸²æŸ“é€±æœŸ ( å¦‚ React )ï¼Œåœ¨é‡æ–°æ¸²æŸ“æ™‚é€™é¡å·¥å…·å‹¢å¿…æœƒåœ¨åŸ·è¡ŒæœŸçŠ§ç‰²ç›¸ç•¶å¯è§€çš„æ¸²æŸ“æˆæœ¬ã€‚

    Master CSS çš„ JIT ä¾è³´ç€è¦½å™¨åŸç”Ÿçš„ APIï¼Œåƒ…åœ¨é¡åç•°å‹•æ™‚åŸ·è¡Œï¼Œèˆ‡æ¡†æ¶ç„¡é—œ
- **âš¡ï¸ é«˜æ•ˆçš„è¦å‰‡å¼•æ“** â€”â€” Master CSS çš„ JIT åªé€²è¡Œäº†ä¸€äº›ä½åŸ·è¡Œæˆæœ¬çš„è¡Œç‚ºï¼Œåƒæ˜¯æ¯”å°é¡åã€è§£æé¡åï¼Œä¸¦ä¸”**åœ¨åŸ·è¡ŒæœŸé«˜æ•ˆé‹ä½œä¸€ç›´æ˜¯ v1.0 é¦–è¦çš„è€ƒé‡**
- **âš¡ï¸ å¯è§£æçš„çµæ§‹åŒ–èªæ³•** â€”â€” ç”±æ–¼ Master CSS æ˜¯ä¸€å€‹å…¨æ–°çš„ CSS èªè¨€ï¼Œæ‰€ä»¥åœ¨èªæ³•ä¸Šæœ‰ä¸€è‡´çš„è¦å‰‡å¯é€éç›¸åŒçš„è§£ææ¨æ¼”å‡ºåŸç”Ÿçš„ CSSï¼Œé€™ä¹Ÿæ˜¯å®ƒå¦‚æ­¤è¼•é‡çš„åŸå› 

åœ¨ v2.0ï¼Œæˆ‘å€‘ç›´æ¥å°‡é£›å¿«çš„ JIT å¼•æ“æ‡‰ç”¨åœ¨ AOT é ç·¨è­¯æ¨¡å¼ï¼Œå…¶é‹ä½œåŸç†æ˜¯é€éæƒæç·¨è­¯å¾Œçš„ `.html` åŠ `.js` ä¸­çš„å­—ä¸²æˆ–æ¨¡æ¿æ¨™è¨˜ ( Tailwind CSS åŠ Windi CSS æ˜¯æƒæåŸå§‹ç¢¼ï¼Œå¦‚ `.jsx`, `.vue` )ï¼Œç¶“éè¦å‰‡å¼•æ“æ¯”å°æ˜¯å¦ç‚º Master CSS é¡åä¸¦è¼¸å‡ºç‚ºä¸€åŒ… CSS æª”ã€‚

æˆ‘å€‘èªç‚ºæƒæç·¨è­¯å¾Œçš„ `.html` åŠ `.js` æœ‰ä»¥ä¸‹å„ªå‹¢ï¼š

- âœ… ç„¡éœ€é‡å°æ¡†æ¶ç‰¹æ®Šçš„æª”æ¡ˆæ ¼å¼é€²è¡Œè§£æï¼Œæ“æœ‰æ›´å¥½çš„ç›¸å®¹æ€§
- âœ… ç„¡éœ€ä»°è³´ `loader` è¼‰å…¥ç‰¹å®šçš„æª”æ¡ˆæ ¼å¼ï¼Œå¦‚ `webpack`
- âœ… ä¾è³´å»ºç½®å·¥å…·çš„ç›¸ä¾æ¨¹è‡ªå‹•æŠ“å–ä¾†æº

å®‰è£ Master CSS ç·¨è­¯å™¨å…¬æ¸¬ç‰ˆï¼š
```bash
npm install @master/css-compiler@beta
```

æˆ‘å€‘æä¾›äº†èˆ‡ä¸»æµå»ºç½®å·¥å…·çš„æ•´åˆï¼Œä½ å¹¾ä¹å¯ä»¥é›¶é…ç½®å•Ÿå‹• Master CSS çš„ AOT ç·¨è­¯æ¨¡å¼ã€‚

## âœ¨ Webpack
https://github.com/master-co/css-compiler/tree/beta/examples/webpack
```js
/* âš™ï¸ webpack.config.js */

const { MasterCSSWebpackPlugin } = require('@master/css-compiler')

module.exports = {
    plugins: [
        new MasterCSSWebpackPlugin()
    ]
};
```

## âœ¨ Vite
https://github.com/master-co/css-compiler/tree/beta/examples/vite
```js
/* âš™ï¸ vite.config.js */

import { MasterCSSVitePlugin } from '@master/css-compiler'

export default defineConfig({
    plugins: [
        MasterCSSVitePlugin()
    ]
})

```
âš ï¸ å‰µå»º Vite å°ˆæ¡ˆå¾Œå‹™å¿…ç§»é™¤ `package.json` ä¸­çš„ `"type": "module"`

## âœ¨ Next.js
https://github.com/master-co/css-compiler/tree/beta/examples/nextjs
```js
/* âš™ï¸ next.config.js */

const { MasterCSSWebpackPlugin } = require('@master/css-compiler')

const nextConfig = {
    webpack: (config) => {
        config.plugins.push(
            new MasterCSSWebpackPlugin({
                output: {
                    dir: 'static/css'
                }
            })
        )
        return config
    }
}

module.exports = nextConfig
```

æ›´å¤šçš„æ¡†æ¶åŠå»ºç½®å·¥å…·æŒ‡å—å°‡å’Œ v2.0 ä¸€åŒæ¨å‡º...

ğŸ¥³ ç¾åœ¨ï¼Œç›´æ¥å•Ÿå‹•ä½ çš„é–‹ç™¼ä¼ºæœå™¨ï¼ŒMaster CSS çš„ AOT ç·¨è­¯å¼•æ“å°‡éš¨å³é‹è¡Œï¼


---

# å…¨æ–°çš„èªæ³•

## âœ¨ ç¾¤çµ„é¸å–å™¨ Grouping Selectors
é€™å€‹åŠŸèƒ½ä½ ä¸€å®šä¸é™Œç”Ÿï¼Œåœ¨åŸç”Ÿ CSS ä½ å¯ä»¥ä½¿ç”¨ `,` ä¾†ç¾¤çµ„é¸å–å™¨ï¼š
```css
:before,
:after {
   /* declarations */
}
```
ç¾åœ¨ï¼Œé€éé¡åæ›´å¿«é€Ÿåœ°å¯¦ç¾ç›¸åŒçš„åŠŸèƒ½
```diff
- <div class="content:'`':before content:'`':after"></div>
+ <div class="content:'`':before,:after"></div>
```
åŸå…ˆçš„ç¾¤çµ„èªæ³•ä¹Ÿæ”¯æ´ç¾¤çµ„é¸å–å™¨
```diff
- <div class="{content:'`';fg:gray;mx:1}:before {content:'`';fg:gray;mx:1}:after"></div>
+ <div class="{content:'`';fg:gray;mx:1}:before,:after"></div>
```

## âœ¨ `color` çš„æ›¿ä»£åç¨± `fg|foreground`

éå»ä½ æœƒçœ‹åˆ° `text-blue`/`font-blue` çš„å‘½åé¢¨æ ¼ä¸¦ä¸” CSS è¦å‰‡é€šå¸¸æ˜¯ï¼š
```css
.text-blue { color: blue }
.font-blue { color: blue }
```
ä½†æ˜¯ CSS çš„ `color` è¨­ç½®çš„å°è±¡ä¸åªæ˜¯æ–‡å­—ï¼Œå®ƒé‚„è¨­ç½®äº† `border-color`, `box-shadow` ç­‰é¡è‰²ç›¸é—œçš„å±¬æ€§ï¼Œé‚£éº¼ä»¥ `text-*` ä½œç‚º `color` çš„ä»£ç¨±ä¸è¦ºå¾—å¥‡æ€ªå—ï¼Ÿ

ç”šè‡³é€£åŸç”Ÿ CSS å°‡å‰æ™¯è‰²ç¨±ç‚º `color` å«ç¾©ä¹Ÿå¤ªéå»£æ³›äº†ï¼Œå› æ­¤æˆ‘å€‘æä¾› `fg|foreground` ä½œç‚ºä½ è¨­ç½®å‰æ™¯è‰²çš„å¦ä¸€å€‹ä»£ç¨±ï¼Œè€Œä¸”å‰æ™¯å‰›å¥½ä¹Ÿèˆ‡èƒŒæ™¯ `bg|background` ç›¸å‘¼æ‡‰ï¼š
```html
<button class="fg:white bg:black">Submit</button>
```
é€™è£¡æ¯”è¼ƒå¤§çš„æ”¹å‹•æ˜¯æˆ‘å€‘ä¸å†æ”¯æŒ `(f|font):color`ï¼š
```diff
  <p class="color:blue">
- <p class="f:blue">
- <p class="font:blue">
+ <p class="fg:blue">
+ <p class="foreground:blue">
```
ä½ å¯ä»¥é€éä»¥ä¸‹ Regular Expression åœ¨ VSCode å…¨åŸŸå–ä»£ï¼š
```
?:font|f|[^-]color):(fade|slate|gray|brown|orange|gold|yellow|grass|green|beryl|teal|cyan|sky|blue|indigo|violet|purple|fuchsia|pink|crimson|red)
```
å–ä»£ç‚ºï¼š
```
fg:$1
```
âš ï¸ å»ºè­°åŸ·è¡Œå‰å…ˆå°‡ `unstaged` çš„æª”æ¡ˆé€²è¡Œ `commit` ä»¥å…å–ä»£éç¨‹ç™¼ç”Ÿç„¡æ³•æŒ½å›çš„éŒ¯èª¤ã€‚

## âœ¨ æ”¯æ´é€éç™¾åˆ†æ¯” `%` è¨­ç½®è‰²å½©é€æ˜åº¦
å’ŒåŸç”Ÿç›¸åŒï¼Œæ”¯æ´é€éç™¾åˆ†æ¯”è®Šæ›´è‰²å½©é€æ˜åº¦çš„èªæ³•ã€‚å…©ç¨®å¯«æ³•çš†å¯ï¼Œå› äººè€Œç•°ã€‚
```diff
  <div class="bg:sky-50/.75">v1.0+</div>
+ <div class="bg:sky-50/75%">v2.0+</div>
```

## âœ¨ `-webkit-text-fill-color` çš„é€Ÿè¨˜ `(t|text):color`
ç‚ºæ–‡å­—è‰²å½©æä¾›äº†æ–°çš„é€Ÿè¨˜ï¼š
```diff
  <div class="text-fill-color:pink-60"></div>
+ <div class="text:pink-60"></div>
+ <div class="t:pink-60"></div>
```

---

# å…¨æ–°çš„é…ç½®åŠç®¡ç†
åœ¨ v1.0 æ™‚æˆ‘å€‘æä¾› `Style.extend` è®“ä½ è‡ªå®šç¾©é…ç½®ï¼š
```diff
- import { Style } from '@master/css'
- Style.extend('classes', {
-    btn: 'font:14 text:center h:40 px:20'
- })
- ...
```
è¨±å¤šäººåæ‡‰é€™æ¨£çš„é…ç½®ä¸æ˜¯é‚£éº¼å‹å–„åŠä¿è½ï¼Œåœ¨ç¶“éæ•¸é€±çš„è¨­è¨ˆåŠæ”¹è‰¯ï¼Œæˆ‘å€‘çµ‚æ–¼æ¯«ç„¡æ‡¸å¿µäº† ğŸ˜Œ

è®“æˆ‘å€‘ä¾†æ¦‚è¦½å…¨æ–°çš„ `master.css.js` é…ç½®æª” âœ¨
```js
module.exports = {
    colors: {
        primary: '#175fe9',
    },
    classes: {
        btn: 'font:14 h:40 text:center bg:primary fg:white'
    },
    themes: {
        light: {
            colors: {
                primary: '#ebbb40',
                accent: defaultColors.gold['70'],
                major: defaultColors.slate['10'],
                content: defaultColors.slate['30'],
                fade: defaultColors.slate['55']
            }
        },
        dark: {
            colors: {
                primary: '#fbe09d',
                accent: '#fbe09d',
                major: defaultColors.gray['80'],
                content: defaultColors.gray['60'],
                fade: defaultColors.gray['60']
            },
            classes: {
                btn: 'rounded'
            },
        }
    },
    values: {
        Width: {
            '2x': '2rem',
            '3x': '3rem',
        }
    },
    semantics: {
        show: 'display:block',
        'hide-text': 'font-size:0px'
    },
    breakpoints: {
        tablet: 768,
        laptop: 1024,
        desktop: 1280,
    },
    selectors: {
        '>custom': '>div>:first+button'
    },
    mediaQueries: {
        watch: '(max-device-width:42mm) and (min-device-width:38mm)'
    },
    rootSize: 16,
    Rules: []
}
```
ä½ å¯èƒ½å·²ç¶“æ³¨æ„åˆ°ä¸€äº›æ–°çš„é…ç½®ï¼Œæˆ‘å€‘ç¨å¾Œæœƒæåˆ°ã€‚

## âš™ï¸ æ“´å±•åŠåˆä½µé…ç½®
é€šå¸¸ä½ æœƒå¸Œæœ›ä»¥æ“´å±•çš„æ–¹å¼ä¾†å¢æ·»é¡å¤–çš„é…ç½®ï¼Œæˆ‘å€‘å…§å»ºäº† `extend()` çš„æ–¹æ³•è®“ä½ åœ¨ä¿æœ‰é è¨­é…ç½®çš„åŒæ™‚é€²è¡Œæ“´å±•åŠåˆä½µé…ç½®ã€‚

- æ·±å±¤ `merge` ç‰©ä»¶
- æ·±å±¤ `concat` é™£åˆ—
- æ“´å±•é è¨­é…ç½®

èˆ‰ä¾‹ï¼šåœ¨ `master.css.js` æ–°å¢ `'hide-text'` èªæ„é¡ååŠ `'ocean'` ä¸»é¡Œï¼Œä¸¦ä¿ç•™é è¨­å€¼ã€‚
```js
module.exports = {
    ...,
    semantics: {
        'hide-text': 'font-size:0px'
    },
    themes: ['ocean']
    ...
}
```
åœ¨é›†ä¸­ç®¡ç†çš„ `master.js` ä¸­å¼•å…¥è‡ªè¨‚é…ç½®ä¸¦åˆå§‹ï¼š
```js
import config from './master.css'
import MasterCSS, { root } from '@master/css'
export const css = new MasterCSS({ config, root }).observe()
```
å–å¾—çš„é…ç½® `css.config` çµæœï¼š
```diff
{
    ...,
    "semantics": {
+       "hide-text": "font-size:0px",
        "abs": "position:absolute",
        "rel": "position:relative",
        ...
    },
    "themes": [
        "dark",
        "light",
+       "ocean"
    ],
    ...
}
```
<img width="1009" alt="Screen Shot 2022-10-27 at 10 50 33 PM" src="https://user-images.githubusercontent.com/33840671/198322915-e8aac3c5-3676-4b39-9cf9-922927356057.png">

## âš™ï¸ æ‰‹å‹•åˆå§‹ Master CSS

æˆ‘å€‘å–æ¶ˆäº† `CommonJS` åŠ `ESM` è¼¸å‡ºåŒ…è‡ªå‹•åˆå§‹çš„è¡Œç‚ºï¼Œæ”¹ç”¨ `new MasterCSS()` æ‰‹å‹•åˆå§‹ Master CSS ä¸¦å¯é¡å¤–æ­é…è‡ªè¨‚é…ç½®ï¼š
```js
// create a `./master.{js,ts}` file to manage initialization.

import config from './master.css' // your custom config file
import MasterCSS, { root } from '@master/css'
export const css = new MasterCSS({ config, root }).observe() // export instance for access
```

åˆ¥å¿˜äº†åœ¨æ‡‰ç”¨ç¨‹å¼çš„å…¥å£å¼•å…¥ `./master.js`ï¼Œä¾‹å¦‚ `./main.js`
```js
import './master';
```

## âš™ï¸ è‡ªå‹•åˆå§‹ Master CSS
åœ¨ `IIFE` ç€è¦½å™¨åŒ…æˆ‘å€‘ä¿ç•™äº† v1 è‡ªå‹•åˆå§‹çš„è¡Œç‚ºï¼Œä¸¦æä¾›æ–°çš„ API `window.masterCSSConfig` è®“ä½ ç›´æ¥åœ¨ HTML ä¸­è‡ªè¨‚é…ç½®ï¼š
```diff
...
<head>
+   <script>
+       window.masterCSSConfig = {
+           colors: { primary: '#ff0000' }
+       }
+   </script>
    <script src="https://cdn.master.co/css@2.0.0-beta.12"></script>
</head>
...
```
âš ï¸ é€šå¸¸åªæœƒåœ¨ HTML ä¸­å¿«é€Ÿç¤ºç¯„æ‰æœƒé€™éº¼åšã€‚

## âœ¨ `config.themes` é€éè‡ªè¨‚ä¸»é¡Œå¤§å¹…ç°¡åŒ–æ¨™è¨˜
ä¾æ“šä¸åŒçš„ä¸»é¡Œè‡ªè¨‚ `classes`, `colors` ä¸”åˆä½µä¸¦ä¿ç•™é è¨­å€¼ï¼š
```js
module.exports = {
    ...,
    colors: {
        primary: '#175fe9',
    },
    classes: {
        btn: 'font:14 h:40 text:center'
    },
    themes: {
        light: {
            colors: {
                primary: '#ebbb40',
                accent: defaultColors.gold['70'],
                major: defaultColors.slate['10'],
                content: defaultColors.slate['30'],
                fade: defaultColors.slate['55']
            },
            classes: {
                btn: 'bg:primary fg:white font:semibold'
            }
        },
        dark: {
            colors: {
                primary: '#fbe09d',
                accent: '#fbe09d',
                major: defaultColors.gray['80'],
                content: defaultColors.gray['60'],
                fade: defaultColors.gray['60']
            },
            classes: {
                btn: 'bg:white fg:primary font:medium'
            }
        }
    },
    ...
}
```
æ ¹æ“š `light` åŠ `dark` è¨­ç½®å…§å®¹å‰æ™¯è‰²ï¼š
```diff
- <div class="fg:slate-30@light fg:gray-60@dark">v1.0+</div>
+ <div class="fg:content">v2.0+</div>

# Generated CSS Rules:
- .dark .fg\:gray-60\@dark { color: #9e9da0 }
- .light .fg\:slate-30\@light { color: #323e52 }
+ .dark .fg\:content { color: #9e9da0 }
+ .light .fg\:content { color: #323e52 }
```
å†çœ‹ä¸€å€‹é€²éšçš„é¸å–ï¼Œæ ¹æ“š `light` åŠ `dark` è¨­ç½®é‡é»å‰æ™¯è‰²ï¼š
```diff
- <div class="fg:slate-10_:where(strong,b,code,a,mark,del)@light fg:gray-80_:where(strong,b,code,a,mark,del)@dark">v1.0+</div>
+ <div class="fg:major_:where(strong,b,code,a,mark,del)">v2.0+</div>
```

## âœ¨ `config.selectors` è‡ªè¨‚é¸å–å™¨æ¨™è¨˜
æ“´å±•è‡ªè¨‚é¸å–å™¨æ¨™è¨˜ï¼Œåˆä½µä¸¦ä¿ç•™é è¨­å€¼ï¼š
```js
module.exports = {
    ...,
    selectors: {
        '>custom': '>div>:first+button'
    },
    ...
}
```
æ‡‰ç”¨å®ƒï¼š
```diff
- <div class="hide>div>:first+button">same</div>
+ <div class="hide>custom"></div>
```
âš ï¸ é€™å€‹é…ç½®çš„æœ¬æ„æ˜¯ç”¨ä¾†åˆç†åœ°ç°¡åŒ–åŸç”Ÿ CSS çš„é¸å–å™¨åƒæ˜¯ `hide:first-child` -> `hide:first`ï¼Œåœ¨ç¸®æ¸›çš„åŒæ™‚å»ºè­°è€ƒé‡å°ˆæ¡ˆçš„å¯ç¶­è­·æ€§ã€‚

ä½ ä¹Ÿå¯ä»¥å°‡ä¸€å€‹é¸å–å™¨æ¨™è¨˜å°æ‡‰å¤šå€‹ï¼Œä»¥é è¨­çš„ä¾›æ‡‰å•†å‰ç¶´ç‚ºä¾‹ï¼š
```js
module.exports = {
    ...,
    selectors: {
        '::slider-thumb': ['::-webkit-slider-thumb', '::-moz-range-thumb'],
        '::slider-runnable-track': ['::-webkit-slider-runnable-track', '::-moz-range-track'],
        ...
    },
    ...
}
```
æ‡‰ç”¨å®ƒï¼š
```html
<div class="bg:red::slider-thumb">...</div>
```
ç”Ÿæˆçš„ CSS è¦å‰‡ï¼š
```css
.bg\:red\:\:slider-thumb::-webkit-slider-thumb {
    background-color: #d11a1e
}

.bg\:red\:\:slider-thumb::-moz-range-thumb {
    background-color: #d11a1e
}
```
åŸç”Ÿ CSS åªè¦æœ‰ä¸€å€‹é¸å–å™¨ç„¡æ•ˆæ•´å€‹è¦å‰‡éƒ½ä¸æœƒè¢«å¥—ç”¨ï¼ŒMaster CSS æœƒè‡ªå‹•å°‡åŒ…å«ä¾›æ‡‰å•†å‰ç¶´çš„é¸å–å™¨åˆ†ç‚ºå…©æ¢è¦å‰‡ç”¢ç”Ÿã€‚

[æŸ¥çœ‹æ‰€æœ‰é è¨­çš„é¸å–å™¨æ¨™è¨˜](https://github.com/master-co/css/tree/beta/src/config/selectors.js)

---

# å…§å»ºä¸»é¡Œåˆ‡æ›èˆ‡åŒæ­¥
ç”±æ–¼ä¸»é¡Œåˆ‡æ›çš„é‚è¼¯å¤§åŒå°ç•°ä¸”å¾ˆå¸¸è¢«ä½¿ç”¨ï¼Œæˆ‘å€‘æ±ºå®šåœ¨ v2.0 å…§å»ºè©²åŠŸèƒ½ï¼ŒåŒ…å«ï¼š

- é›¶é…ç½®å•Ÿç”¨
- èˆ‡ä½œæ¥­ç³»çµ±åå¥½åŒæ­¥ `system`
- å„²å­˜ç”¨æˆ¶åå¥½ï¼Œèˆ‡ `localStorage` åŒæ­¥
- æ­é…è¨­ç½® `color-scheme`ï¼Œä¾‹å¦‚ï¼š`<html style="color-scheme: dark">`
- é€éé¡ `class` åˆ‡æ›ä¸»é¡Œï¼Œä¾‹å¦‚ï¼š`<html class="dark">`

## âœ¨ åˆ‡æ›ä¸»é¡Œæ–¹æ¡ˆ 

```ts
import { css } from './master'
css.scheme = 'dark' // default: 'system'
```

## âœ¨ å­˜å–ä¸»é¡Œæ–¹æ¡ˆ
```ts
import { css } from './master'
console.log(css.scheme) // default: 'light', 'dark', 'system'
console.log(css.theme) // default: 'light', 'dark'
```

## âœ¨ è‡ªå®šä¸»é¡Œæ–¹æ¡ˆé…ç½®
ä»¥ä¸‹é…ç½®çš†ç‚ºé è¨­å€¼ï¼Œå…¶ä¸­ `scheme.preference` ç‚ºç¶²ç«™é è¨­çš„ä¸»é¡Œæ–¹æ¡ˆåå¥½ã€‚
```js
module.exports = {
    ...,
    scheme: {
        preference: 'system', // 'system', 'dark', 'light'
        storage: {
            sync: true,
            key: 'scheme'
        }
    }
    ...
}
```

## âœ¨ åœ¨ React ä¸­å¯¦ä½œä¸»é¡Œåˆ‡æ›èˆ‡ä»‹é¢
æˆ‘å€‘æä¾›äº† [useScheme](https://github.com/master-co/css.react#usescheme) æ›éˆï¼Œè®“ä½ ç„¡ç—›ä¾è³´ React çš„æ¸²æŸ“æ©Ÿåˆ¶
```tsx
import { css } from './master';
import { useEffected, useScheme } from '@master/css.react'
import { useCallback } from 'react';

export default function ThemeSchemeButton() {
    const { scheme, setScheme, theme } = useScheme(css)
    const effected = useEffected()
    const changeScheme = useCallback(({ target }) => {
        setScheme(target.value)
    }, [setScheme])
    return (
        <button className="rel">
            {effected && theme}
            <select value={scheme} onChange={changeScheme} className="abs full opacity:0 cursor:pointer" >
                <option value="light">â˜€ï¸ Light</option>
                <option value="dark">ğŸŒœ 'Dark</option>
                <option value="system">System</option>
            </select>
        </button>
    )
}
```

---

# å…¨æ–°å¥—ä»¶ã€å‡ç´šèˆ‡æ›´å‹•

## âœ¨ CSS React
[@master/css.react](https://github.com/master-co/css.react) - React hooks for Master CSS

## âœ¨ CSS Compiler
[@master/css-compiler](https://github.com/master-co/css-compiler) - Compile Master CSS ahead of time with zero-configuration integration with build tools

## â¬†ï¸ å‡ç´š Normal CSS
[@master/normal.css](https://github.com/master-co/normal.css) - Normalize browser's styles. ~500B
```bash
npm install @master/normal.css@beta
```

ä¸å†æ”¯æŒ `--font-mono`, `--font-sans`, `--font-serif` CSS è®Šæ•¸
```diff
- :root {
-     --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
-     --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
-     --font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;
- }

body {
-     font-family: var(--font-sans);
      ...
}

- code,
- kbd,
- samp {
-     font-family: var(--font-mono);
- }
```
è«‹æ”¹ç”¨ Master CSS çš„èªæ³•ä¾†é è¨­å…¨å±€çš„å­—é«”ï¼š
```html
<body class="font:sans font:mono_:where(code,kbd,samp)">
    ...
</body>
```

## â¬†ï¸ å‡ç´š CSS èªè¨€æœå‹™
è«‹å‡ç´š VSCode ä¸Šçš„ [Master CSS èªè¨€æœå‹™æ“´å……](https://github.com/master-co/css-language-service)åˆ° v2.0


## ğŸ”„ `fade` -> `slate`
é‡æ–°å‘½åè‰²å½©ä¸­çš„ `fade` ç‚º `slate` çŸ³ç°è‰²ï¼Œä»¥ç¬¦åˆæ™®éçš„è‰²å½©å‘½åã€‚
```diff
-    <p class="bg:fade ...">fade</p>
+    <p class="bg:slate ...">slate</p>
```

## ğŸ”„ `MasterStyleSheet` -> `MasterCSS`
```diff
- import { MasterStyleSheet } from '@master/css'
+ import MasterCSS from '@master/css'
```

## ğŸ”„ `MasterStyle` -> `MasterCSSRule`
```diff
- import { MasterStyle } from '@master/css'
+ import { MasterCSSRule } from '@master/css'
```

## ğŸ”„ `id="master-css"` -> `title="master"`
```diff
<html>
<head>
-    <style id="master-css">...</style>
+    <style title="master">...</style>
</head>
</html>
```

## ğŸ”„ `config.colorSchemes` -> `config.themes`

---

# æ›´å¤šçš„ API
æ¸²æŸ“ç›¸é—œçš„ API åœ¨ v1.0 ä¸»è¦ç”¨æ–¼ä¼ºæœå™¨æ¸²æŸ“ ( Server-side Rendering ) åŠéœæ…‹ç«™é»ç”Ÿæˆ ( Static-site Generation )ï¼Œåœ¨ v2.0 æ²’æœ‰å¤ªå¤§çš„æ”¹è®Šï¼Œåªæœ‰é€²è¡Œå±€éƒ¨çš„ API å„ªåŒ–ã€‚

## `render()`
å‚³å…¥é¡åé™£åˆ—ä¸¦è¿”å›ç”¢ç”Ÿçš„ CSS æ–‡æœ¬ã€‚
```jsx
import { render } from '@master/css'
import { css } from './master'
const classes: string[] = ['text:center', 'font:32']
const result = render(classes, css)
```
rendered result:
```css
.font\:32{font-size:2rem}.text\:center{text-align:center}
```

## `renderFromHTML()`
å‚³å…¥ HTML æ–‡æœ¬ã€æƒæä¸¦è¿”å›ç”¢ç”Ÿ CSS æ–‡æœ¬ã€‚
```jsx
import { renderFromHTML } from '@master/css'
import { css } from './master'
const html: string = `
    <html>
        <head></head>
        <body>
            <h1 class="text:center font:32">Hello World</h1>
        </body>
    </html>
`
const result = renderFromHTML(html, css)
```
rendered result:
```css
.font\:32{font-size:2rem}.text\:center{text-align:center}
```

## `renderIntoHTML()`
å‚³å…¥ HTML æ–‡æœ¬ â†’ æƒæä¸¦ç”¢ç”Ÿ CSS æ–‡æœ¬ â†’ æ³¨å…¥åˆ° HTML `<head>` ä¸­ â†’ è¿”å›æ¸²æŸ“çš„ HTML æ–‡æœ¬çµæœã€‚
```js
import { renderIntoHTML } from '@master/css'
import { css } from './master'
const html: string = `
    <html>
        <head></head>
        <body>
            <h1 class="text:center font:32">Hello World</h1>
        </body>
    </html>
`
const result = renderIntoHTML(html, css)
```
rendered result:
```html
<html>
    <head>
        <style title="master">.font\:32{font-size:2rem}.text\:center{text-align:center}</style>
    </head>
    <body>
        <h1 class="text:center font:32">Hello World</h1>
    </body>
</html>
```

## `fillColorScale()`
å°‡æœªå®šç¾©çš„è‰²éšå€¼ä»¥ç›¸é„°è‰²éšå€¼çš„å¹³å‡å¡«æ»¿ `1,2,...99`ã€‚
```js
import { fillColorScale } from '@master/css'

module.exports = {
    colors: {
        blue: fillColorScale({
            95: '001141',
            90: '001d6c',
            80: '002d9c',
            70: '0043ce',
            60: '0f62fe',
            50: '4589ff',
            40: '78a9ff',
            30: 'a6c8ff',
            20: 'd0e2ff',
            10: 'edf5ff'
        })
    }
}
```
å¦‚æ­¤ä»¥ä¾†ï¼Œä½ ä¸åªæœ‰ `blue-40`, `blue-50` é‚„æœ‰ `blue-67`, `blue-72` ç­‰é–“å€¼å¯ä»¥é¸ç”¨ï¼Œä»¥ç²å¾—æ›´å¥½çš„é¡¯è‰²ã€‚

## `defaultConfig`
æˆ‘å€‘è¼¸å‡ºäº†æ‰€æœ‰çš„é è¨­é…ç½® [MasterCSSConfig](https://github.com/master-co/css/blob/beta/src/interfaces/config.ts) ï¼Œä½ å¯ä»¥é€éä»¥ä¸‹æ–¹å¼å­˜å–ï¼š
```js
import { defaultConfig } from '@master/css'

console.log(defaultConfig.colors)
console.log(defaultConfig.breakpoints)
// ...
```
æˆ–å–®ç¨å¼•å…¥ï¼š
```js
import { defaultColors, defaultBreakpoints } from '@master/css'

console.log(defaultColors)
console.log(defaultBreakpoints)
// ...
```
[æŸ¥çœ‹æ‰€æœ‰é è¨­é…ç½®](https://github.com/master-co/css/tree/beta/src/config)

---

# å†ä¾†æ˜¯ä»€éº¼ï¼Ÿ

1. **æ–‡ä»¶ `docs.master.co` æ”¹ç‰ˆ**ï¼šæ–°çš„å…¨ç«™æœå°‹åŠŸèƒ½åŠä»‹é¢
2. **é¦–é  `css.master.co` æ”¹ç‰ˆ**ï¼šéå»æˆ‘å€‘å°‡å…¨éƒ¨çš„ç²¾åŠ›æŠ•å…¥åœ¨ Master CSS æ ¸å¿ƒåŠŸèƒ½ç ”ç™¼ï¼Œè¨±å¤šç¶“å…¸ç‰¹è‰²ä¸€ç›´åŸ‹æ²’åœ¨æ–‡ä»¶ä¸­ï¼Œé€éè¦–è¦ºåŠ å¼·å„ªå‹¢çš„å‚³é”å°‡æœƒæ˜¯é€™æ¬¡æ”¹ç‰ˆçš„é‡é»ï¼
3. **æ­£å¼ç‰ˆ v2.0**ï¼šå…¬æ¸¬ç‰ˆæœ¬ç™¼å¸ƒå¾Œï¼Œæˆ‘å€‘é è¨ˆåœ¨ä¸€å€‹æœˆå¾Œç™¼å¸ƒæ­£å¼ç‰ˆ
4. **Master UI ç³»åˆ—**ï¼šç›¸ä¿¡å¾ˆå¤šäººéƒ½è¿«ä¸åŠå¾… Master UI çš„ç³»åˆ—ï¼Œæˆ‘å€‘æ¥µåº¦è¬›ç©¶ä»‹é¢çš„ç´°ç¯€åŠåŸå§‹ç¢¼çš„å“è³ªï¼Œæ­£ç´°ç«æ…¢ç†¬ä¸­ï¼Œé è¨ˆæ–¼å¹´åº•é‡‹å‡ºåŸºæœ¬çš„é–‹æºå…ƒä»¶å¦‚ `button`, `card`, `tabs` ç­‰ã€‚

---

> [è¿”å›è¨è«–ä¸² â†’](https://github.com/master-co/css/discussions/79)