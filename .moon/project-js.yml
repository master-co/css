$schema: 'https://moonrepo.dev/schemas/global-project.json'

tasks:
    lint:
        command: 'eslint ./packages'
    test:
        command: 'jest'
    check-type:
        command: 'tsc --noEmit'
    declarations:
        command: 'tsc --emitDeclarationOnly'
    clear:
        command: rm -rf dist
    build-cjs:
        command:
            - esbuild
            - src/index.ts
            - '--bundle'
            - '--outfile=dist/index.cjs'
            - '--format=cjs'
            - '--platform=node'
            - '--minify'
            - '--sourcemap'
    build-esm:
        command:
            - esbuild
            - src/index.ts
            - '--bundle'
            - '--outfile=dist/index.mjs'
            - '--format=esm'
            - '--platform=node'
            - '--minify'
            - '--sourcemap'
    build-iife:
        command:
            - esbuild
            - src/index.browser.ts
            - '--bundle'
            - '--outfile=dist/index.browser.js'
            - '--format=iife'
            - '--minify'
            - '--sourcemap'
